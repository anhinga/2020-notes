# Dataflow matrix machines по-русски

Меня попросили написать очень неформальный текст про dataflow matrix machines по-русски, совсем короткий.

I was asked to write a short very informal note on dataflow matrix machines in Russian.

## Мотивировка

Когда я учился в институте в Москве в первой половине 80-х годов, меня очень достала необходимость всё время программировать, и я заинтересовался задачами автоматизации этого процесса. Довольно быстро стало ясно, что одним из главных препятствий к автоматическому синтезу программ является дискретность типичного пространства программ и большая чувствительность программ к изменению, вообще говоря, даже одной буквы. До сих пор, успехи в автоматическом синтезе программ крайне скромные, именно из-за этого обстоятельства.

Меж тем, прикладные математики имеют большой опыт в синтезе разнообразных непрерывных объектов на компьютере - синтез кривых (функций и их графиков), поверхностей, матриц коэффициентов связей искусственных нейронных сетей - все эти задачи гораздо легче решаются на компьютере, чем задачи синтеза дискретных объектов.

Отсюда возникла задача - понять, каким образом можно программировать так, чтобы программы можно было деформировать непрерывным образом (чтобы программы допускали сколь угодно малое изменение). Вот, этой задачей я пробую заниматься с тех пор с разных углов, но удовлетворительное решение нашлось только в районе 2015-го года.

## Решение

Довольно долго я занимался непрерывными моделями обычных программ и пробовал извлечь из этих занятий способы "непрерывной в некотором смысле деформации обычных программ", но это оказался, по-видимому, довольно тупиковый путь. Правильным решением оказалось придумать некоторый специализированный новый формализм программирования, достаточно богатый и выразительный, чтобы на нём было можно с удобством программировать всё, что может захотеться программировать, но который, при этом, допускал бы непрерывные деформации программ.

Оказалось, что надо думать в терминах потоков данных, которые можно комбинировать друг с другом с коэффициентами (скажем половина такого потока, и треть другого, и одна шестая третьего). И вот, нужно программировать в терминах комбинаций этих потоков с коэффициентами, и соединения преобразователей этих потоков в сети (нечто вроде искусственных нейронных сетей, но только вместо потоков чисел мы работаем с потоками более сложных объектов).

Например, можно рассмотреть потоки картинок (то есть, анимации). Вот видео одного из моих первых генераторов анимаций, которые я запрограммировал в этом стиле в 2015 году:

[анимация, запрограммированная в стиле dataflow](https://youtu.be/fEWcg_A5UZc)

Картинки можно смешивать с коэффициэнтами. На этом 30-секудном видео половина анимации в левом нижнем квадрате смешивается с половиной анимации в левом вернем квадрате, давая анимацию, показываемую в правом нижнем квадрате. В последние несколько секунд видео мы начинаем интерактивно менять эти коэффициенты, на 23-ей секунде сначала плавно увеличивая долю левого верхнего квадрата и уменьшая долю левого нижнего, затем наоборот.

Смешивание разных видео с коэффициентами - идея не новая, видео-жокеи давно это делают, когда смешивают разные видео вместе во время своих представлений:

https://en.wikipedia.org/wiki/VJing

Новым здесь является осознание того, что программирование в таком стиле достаточно выразительно, чтобы и вообще программировать таким образом более-менее какие угодно программистские задачи (к 2020-му году мы набрали довольно большую коллекцию программистских упражнений, выполненных в этом стиле).
